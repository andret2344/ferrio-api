{% extends 'base.html.twig' %}
{% block body %}
	<nav class="navbar bg-body-tertiary">
		<div class="container-fluid">
			<a class="navbar-brand">Ferrio Translation UI</a>
			<div style='display: inline-flex'>
				<div class="dropdown">
					<button
							class="btn btn-secondary dropdown-toggle"
							type="button"
							data-bs-toggle="dropdown"
							aria-expanded="false"
							style='width: 150px'
					>
						{{ languageFrom.name }}
					</button>
					<ul class="dropdown-menu">
						{% for language in languages %}
							{% if language != languageFrom and language != languageTo %}
								<li>
									<a
											class="dropdown-item"
											href='{{ path('manage_translate', {'page': page, 'from': language.code, 'to': languageTo.code }) }}'
									>{{ language.name }}</a>
								</li>
							{% endif %}
						{% endfor %}
					</ul>
				</div>
				<i class="bi bi-arrow-left-right swap" style='font-size: 26px; cursor: pointer'></i>
				<div class="dropdown">
					<button
							class="btn btn-secondary dropdown-toggle"
							type="button"
							data-bs-toggle="dropdown"
							aria-expanded="false"
							style='width: 150px'
					>
						{{ languageTo.name }}
					</button>
					<ul class="dropdown-menu">
						{% for language in languages %}
							{% if language != languageFrom and language != languageTo %}
								<li>
									<a
											class="dropdown-item"
											href="/manage/translate/{{ languageFrom.code }}/{{ language.code }}"
									>{{ language.name }}</a>
								</li>
							{% endif %}
						{% endfor %}
					</ul>
				</div>
			</div>
		</div>
	</nav>
	<section class='section-main'>
		<span class='heading my-5'>Welcome to translation from {{ languageFrom.name }} to {{ languageTo.name }}!</span>
		{% set url = '/manage/translate/%page%/' ~ languageFrom.code ~ '/' ~ languageTo.code %}
		{% include 'components/navigation.html.twig' with {'page': page, 'url': url} %}
		<table class="table table-dark table-bordered">
			<caption>Translations</caption>
			<thead>
			<tr>
				<th scope='col'>#</th>
				<th scope='col'>Date</th>
				<th scope='col' class='w-50'>From</th>
				<th scope='col' class='w-50'>To</th>
				<th scope='col'></th>
			</tr>
			</thead>
			<tbody>
			{% for element in holidays %}
				{% set form_id = 'form-' ~ element.id %}
				<form id='{{ form_id }}' method='post'>
					<input type='hidden' name='action' value='update' form='{{ form_id }}'/>
					<input type='hidden' name='metadata_id' value='{{ element.id }}' form='{{ form_id }}'/>
				</form>
				<tr>
					<td rowspan='2'>{{ element.id }}</td>
					<td rowspan='2'>{{ element.month | pad(2, '0') }}.{{ element.day | pad(2, '0') }}</td>
					<td>{{ element.nameFrom }}</td>
					<td>
						<label for='{{ 'name-' ~ element.id }}' class='d-none'>Name</label>
						<input
								name='name'
								class='w-100 textarea-holiday-name'
								form='{{ form_id }}'
								id='{{ 'name-' ~ element.id }}'
								value='{{ element.nameTo }}'
						/>
					</td>
					<td rowspan='2'>
						<input type='submit' value='Send' form='{{ form_id }}'>
					</td>
				</tr>
				<tr>
					<td>{{ element.descriptionFrom }}</td>
					<td>
						<label for='{{ 'description-' ~ element.id }}' class='d-none'>Description</label>
						<textarea
								style='min-height: 72px'
								name='description'
								class='w-100 textarea-holiday-description'
								form='{{ form_id }}'
								id='{{ 'description-' ~ element.id }}'
						>{{ element.descriptionTo }}</textarea>
					</td>
				</tr>
			{% endfor %}
			</tbody>
		</table>
		{% include 'components/navigation.html.twig' with {'page': page, 'url': url} %}
	</section>
	<script>
		const swapIcon = document.querySelector('.swap');
		swapIcon.addEventListener('click', () => {
			window.location.href = '/manage/translate/{{ page }}/{{ languageTo.code }}/{{ languageFrom.code }}';
		});
	</script>
{% endblock %}
